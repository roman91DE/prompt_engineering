
# Consistency Checks for LLM Responses

In this lesson, we explore two key methods to reduce the likelihood of errors or hallucinations in responses generated by large language models (LLMs) like GPT-4. These techniques focus on ensuring that the output is consistent with the input documents, thereby maintaining the accuracy and reliability of the generated content.

## Key Takeaways

### Method 1: Using Identifiers for Consistency Checks

1. **Identifiers in Documents**:
   - Providing identifiers (e.g., section numbers, line numbers, or page numbers) in the input documents allows for precise cross-referencing.
   - Example: "List all the prompts for information in the form and the Identifier."
     - *Quotation*: “What we want to try to do is we want to build ways that we can do consistency checks between what is being produced and the original set of documents.”

2. **Cross-Referencing Output**:
   - The LLM should include these identifiers in its output, enabling users to verify the consistency of the information by checking the identifiers against the original documents.
   - *Quotation*: “We can take the output, we can look at the Identifier that it provides... we can always go back and check if that's consistent with what's in the document.”

3. **Enhancing Documents with Identifiers**:
   - If the document lacks identifiers, enrich the text by adding line numbers or section markers to facilitate accurate referencing.
   - *Quotation*: “There's lots of ways of enriching the document with identifiers that you can go back and point to.”

### Method 2: Using Quotations for Consistency Checks

1. **Extracting Quotations**:
   - Ask the LLM to provide quotations from the original document that support its generated content.
   - Example: "Provide appropriate quotations from the original text beneath the statements they support."
     - *Quotation*: “I've asked it to take the outline that it produced and I've asked it to go through and provide me quotations from my transcript where I say something related to that.”

2. **Verifying Consistency**:
   - Review the extracted quotations to ensure they accurately support the generated statements. This method helps identify areas where the LLM might have injected information not present in the original text.
   - *Quotation*: “Having it go and try to pull quotations or reference specific places in the original document is a way that you can then go and do a consistency check and see what's there, what's not.”

3. **Handling Missing Quotations**:
   - Identify and scrutinize areas where the LLM cannot find supporting quotations. These may indicate potential hallucinations or areas requiring further verification.
   - *Quotation*: “No specific sentence found in the transcript, but challenges may refer to difficulties in extracting specific details from unstructured data.”

### Practical Application

1. **Document Analysis**:
   - Use these methods when performing document analysis to ensure that the LLM’s outputs are accurate and consistent with the provided materials.
   - *Quotation*: “We want the output to be consistent with the documents that we give it.”

2. **Fact-Checking and Validation**:
   - Implement these techniques as part of a rigorous fact-checking and validation process to maintain the integrity of the generated content.
   - *Quotation*: “Whenever you need to make sure that the output is consistent with original documents, have it go and reference identifiers in the original document.”

### Conclusion

By using identifiers and extracting quotations, you can perform effective consistency checks on the outputs generated by LLMs. These methods help ensure that the generated content remains true to the original documents, reducing the risk of hallucinations and maintaining the accuracy and reliability of the information.
